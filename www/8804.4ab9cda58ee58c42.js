"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8804],{8804:(F,p,s)=>{s.r(p),s.d(p,{LoginPageModule:()=>j});var m=s(177),g=s(4341),r=s(4742),d=s(3799),h=s(467),e=s(4438),f=s(369),v=s(1626);let y=(()=>{var o;class n{constructor(t){this.http=t,this.apiUrl="http://localhost:3000/usuarios"}getUsuario(t){return this.http.get(`${this.apiUrl}/${t}`)}actualizarClave(t,i){return this.http.patch(`${this.apiUrl}/${t}`,{clave:i})}login(t,i){return this.http.get(`${this.apiUrl}?nombreUsuario=${t}&clave=${i}`)}}return(o=n).\u0275fac=function(t){return new(t||o)(e.KVO(v.Qq))},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),n})();function b(o,n){if(1&o&&(e.j41(0,"ion-text",17)(1,"p"),e.EFF(2),e.k0s()()),2&o){const a=e.XpG();e.R7$(2),e.JRh(a.errorMessage)}}const P=[{path:"",component:(()=>{var o;class n{constructor(t,i,l){this.router=t,this.storage=i,this.apiService=l,this.errorMessage="",this.passwordType="password",this.passwordIcon="eye-off"}ngOnInit(){var t=this;return(0,h.A)(function*(){yield t.storage.create()})()}togglePasswordVisibility(){this.passwordType="password"===this.passwordType?"text":"password",this.passwordIcon="eye-off"===this.passwordIcon?"eye":"eye-off"}login(t){if(t.valid){const{username:i,password:l}=t.value;this.apiService.login(i,l).subscribe(c=>{if(c&&c.length>0){const u=c[0];console.log("Inicio de sesi\xf3n exitoso"),this.errorMessage="",localStorage.setItem("usuario",u.id.toString()),this.storage.set("nombreUsuario",u.nombreUsuario).then(()=>{console.log("Nombre de usuario almacenado correctamente")}).catch(w=>{console.error("Error al almacenar el nombre de usuario:",w)}),this.router.navigate("docente"===u.tipo?["/pag-inicio-docente"]:"estudiante"===u.tipo?["/pag-inicio-estudiante"]:["/asignaturas"])}else console.log("Credenciales incorrectas"),this.errorMessage="Esta cuenta no existe"},c=>{console.error("Error al iniciar sesi\xf3n:",c),this.errorMessage="Error en el inicio de sesi\xf3n"})}else this.errorMessage="Por favor complete todos los campos"}resetPassword(){console.log("Se ha solicitado el restablecimiento de la contrase\xf1a"),this.router.navigate(["/recuperar"])}}return(o=n).\u0275fac=function(t){return new(t||o)(e.rXU(d.Ix),e.rXU(f.w),e.rXU(y))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-login"]],decls:27,vars:4,consts:[["form","ngForm"],["color","light","padding",""],[3,"ngSubmit"],["justify-content-center",""],["size-md","6","size-xs","12"],["text-center",""],["position","floating"],["name","username","type","text","ngModel","","required",""],["name","password","ngModel","","required","",3,"type"],["slot","end",3,"click","name"],["color","danger",4,"ngIf"],[2,"margin-top","20px"],["size","large","type","submit","expand","block",3,"disabled"],["text-center","",2,"margin-top","10px"],["size","small","color","medium","expand","block",3,"click"],["text-center","",2,"margin-top","70px"],["src","assets/images/Imagen1.jpg","alt","Imagen",2,"max-width","30%","height","auto","opacity","0.8","display","block","margin-left","auto","margin-right","auto"],["color","danger"]],template:function(t,i){if(1&t){const l=e.RV6();e.j41(0,"ion-content",1)(1,"form",2,0),e.bIt("ngSubmit",function(){e.eBV(l);const u=e.sdS(2);return e.Njj(i.login(u))}),e.j41(3,"ion-grid")(4,"ion-row",3)(5,"ion-col",4)(6,"div",5)(7,"h3"),e.EFF(8,"Ingreso de usuario"),e.k0s()(),e.j41(9,"ion-item")(10,"ion-label",6),e.EFF(11,"Nombre de usuario"),e.k0s(),e.nrm(12,"ion-input",7),e.k0s(),e.j41(13,"ion-item")(14,"ion-label",6),e.EFF(15,"Contrase\xf1a"),e.k0s(),e.nrm(16,"ion-input",8),e.j41(17,"ion-icon",9),e.bIt("click",function(){return e.eBV(l),e.Njj(i.togglePasswordVisibility())}),e.k0s()(),e.DNE(18,b,3,1,"ion-text",10),e.j41(19,"div",11)(20,"ion-button",12),e.EFF(21,"INGRESAR"),e.k0s()(),e.j41(22,"div",13)(23,"ion-button",14),e.bIt("click",function(){return e.eBV(l),e.Njj(i.resetPassword())}),e.EFF(24,"Restablecer Contrase\xf1a"),e.k0s()()()()()(),e.j41(25,"div",15),e.nrm(26,"img",16),e.k0s()()}if(2&t){const l=e.sdS(2);e.R7$(16),e.Y8G("type",i.passwordType),e.R7$(),e.Y8G("name",i.passwordIcon),e.R7$(),e.Y8G("ngIf",i.errorMessage),e.R7$(2),e.Y8G("disabled",l.invalid)}},dependencies:[m.bT,g.qT,g.BC,g.cb,g.YS,g.vS,g.cV,r.Jm,r.hU,r.W9,r.lO,r.iq,r.$w,r.uz,r.he,r.ln,r.IO,r.Gw]}),n})()}];let I=(()=>{var o;class n{}return(o=n).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[d.iI.forChild(P),d.iI]}),n})(),j=(()=>{var o;class n{}return(o=n).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[m.MD,g.YN,r.bv,I]}),n})()}}]);