"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8642],{8642:(P,C,l)=>{l.r(C),l.d(C,{ClavePageModule:()=>y});var g=l(177),v=l(4341),o=l(4742),d=l(3799),c=l(467),e=l(4438),m=l(7165),f=l(3656);const p=[{path:"",component:(()=>{var n;class s{constructor(a,r,i){this.apiService=a,this.alertController=r,this.navCtrl=i,this.claveActual="",this.nuevaClave="",this.confirmarClave="",this.userId=0}ngOnInit(){const a=localStorage.getItem("usuario");a?this.userId=parseInt(a,10):this.navCtrl.navigateRoot("/login")}cambiarClave(){var a=this;return(0,c.A)(function*(){a.claveActual&&a.nuevaClave&&a.confirmarClave?a.nuevaClave===a.confirmarClave?a.apiService.getUsuario(a.userId).subscribe(function(){var r=(0,c.A)(function*(i){i.clave===a.claveActual?a.apiService.actualizarClave(a.userId,a.nuevaClave).subscribe((0,c.A)(function*(){yield(yield a.alertController.create({header:"\xc9xito",message:"La clave ha sido cambiada correctamente.",buttons:["OK"]})).present(),a.claveActual="",a.nuevaClave="",a.confirmarClave="",a.navCtrl.navigateRoot("/login")}),function(){var t=(0,c.A)(function*(M){yield(yield a.alertController.create({header:"Error",message:"No se pudo cambiar la clave. Int\xe9ntalo nuevamente.",buttons:["OK"]})).present()});return function(M){return t.apply(this,arguments)}}()):yield(yield a.alertController.create({header:"Error",message:"La clave actual es incorrecta.",buttons:["OK"]})).present()});return function(i){return r.apply(this,arguments)}}(),function(){var r=(0,c.A)(function*(i){yield(yield a.alertController.create({header:"Error",message:"No se pudo obtener la informaci\xf3n del usuario.",buttons:["OK"]})).present()});return function(i){return r.apply(this,arguments)}}()):yield(yield a.alertController.create({header:"Error",message:"La nueva clave y la confirmaci\xf3n no coinciden.",buttons:["OK"]})).present():yield(yield a.alertController.create({header:"Error",message:"Por favor, completa todos los campos.",buttons:["OK"]})).present()})()}}return(n=s).\u0275fac=function(a){return new(a||n)(e.rXU(m.P),e.rXU(o.hG),e.rXU(f.q9))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-clave"]],decls:28,vars:3,consts:[["fixed",""],["position","floating"],["type","password","required","",3,"ngModelChange","ngModel"],["expand","block","color","primary",3,"click"]],template:function(a,r){1&a&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Cambiar Contrase\xf1a"),e.k0s()()(),e.j41(4,"ion-content")(5,"ion-grid",0)(6,"ion-row")(7,"ion-col")(8,"ion-item")(9,"ion-label",1),e.EFF(10,"Contrase\xf1a Actual"),e.k0s(),e.j41(11,"ion-input",2),e.mxI("ngModelChange",function(t){return e.DH7(r.claveActual,t)||(r.claveActual=t),t}),e.k0s()()()(),e.j41(12,"ion-row")(13,"ion-col")(14,"ion-item")(15,"ion-label",1),e.EFF(16,"Nueva Contrase\xf1a"),e.k0s(),e.j41(17,"ion-input",2),e.mxI("ngModelChange",function(t){return e.DH7(r.nuevaClave,t)||(r.nuevaClave=t),t}),e.k0s()()()(),e.j41(18,"ion-row")(19,"ion-col")(20,"ion-item")(21,"ion-label",1),e.EFF(22,"Confirmar Nueva Contrase\xf1a"),e.k0s(),e.j41(23,"ion-input",2),e.mxI("ngModelChange",function(t){return e.DH7(r.confirmarClave,t)||(r.confirmarClave=t),t}),e.k0s()()()(),e.j41(24,"ion-row")(25,"ion-col")(26,"ion-button",3),e.bIt("click",function(){return r.cambiarClave()}),e.EFF(27," Cambiar Clave "),e.k0s()()()()()),2&a&&(e.R7$(11),e.R50("ngModel",r.claveActual),e.R7$(6),e.R50("ngModel",r.nuevaClave),e.R7$(6),e.R50("ngModel",r.confirmarClave))},dependencies:[v.BC,v.YS,v.vS,o.Jm,o.hU,o.W9,o.lO,o.eU,o.$w,o.uz,o.he,o.ln,o.BC,o.ai,o.Gw]}),s})()}];let h=(()=>{var n;class s{}return(n=s).\u0275fac=function(a){return new(a||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[d.iI.forChild(p),d.iI]}),s})(),y=(()=>{var n;class s{}return(n=s).\u0275fac=function(a){return new(a||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[g.MD,v.YN,o.bv,h]}),s})()}}]);